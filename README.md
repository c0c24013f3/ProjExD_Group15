# スペースインベーダーらしきもの

## 実行環境の必要条件
* python >= 3.10
* pygame >= 2.1

## ゲームの概要
* 主人公の戦闘機が、迫りくる敵機や障害物をビームで粉砕し突き進むゲーム
* 参考URL：[サイトタイトル](https://www.nintendo.com/jp/games/feature/nintendo-classics/clv-p-hafcj/index.html)

## ゲームの遊び方
* 矢印キーで機体を操作し，スペースキー押下による発射するビームで敵機や障害物を破壊する
* 敵機の攻撃や障害物との衝突で、機体に一定以上のダメージが蓄積するとゲームオーバーとなる

## ゲームの実装
### 共通基本機能
* 背景画像とメイン機体、敵機の描画

### 分担追加機能(仮)

* （担当：オウ）：中ボス

### 中ボスに実装された機能

1. **出現判定と出現アニメーション**

   * スコアが一定（`score >= 50`）になると一度だけ出現します。
   * 画面外からゆっくり降りてきて所定位置（`y >= 50`）で止まる登場アニメーションを持っています。

2. **移動パターン**

   * 画面左右に往復（画面端で反転）する横移動を行います。
   * ゆるやかな上下の振動（サイン波による小さな上下動）も同時に行います。
   * ごくまれに発生する「特殊移動」フラグがあり、短時間だけ高速移動する動作（バースト移動）を行う仕組みがあります。

3. **攻撃（弾幕）**

   * **螺旋（Spiral）攻撃**：角度を少しずつずらしながら円周方向に複数弾発射し、螺旋状の弾幕を作ります。
   * **散射（Scatter / Spread）攻撃**：下向きの扇形に多数の弾を一度に発射します（`center_angle = 90°` = 下）。
   * 上記の2モードを **自動で切り替え**（約3秒ごと）します。
   * **ホーミング（追尾）攻撃は実装していません**（要望どおり削除済み）。

4. **弾の仕様**

   * 中ボス弾は **赤い円（Surfaceで描画）**：画像に依存せず確実に表示されます。
   * 弾の大きさは **直径約24px（半径12px）** と大きめで視認性を高めています。
   * 弾は **直線移動**（螺旋は発射角をずらすことで軌跡に変化を作る）、速度はモードごとに設定されています。
   * 発射間隔は `shoot_delay`（現在は900ms）で調整可能です。

5. **弾の管理と当たり判定**

   * 発射した弾は必ず `all_sprites` と `enemy_bullets_group` に追加されます（当たり判定が有効になるように）。
   * プレイヤーが `enemy_bullets_group` と衝突すると（`spritecollide(..., True)`）、爆発エフェクトが出てプレイヤーは `hide()` されゲームオーバーになります。

6. **体力（HP）と死亡処理**

   * 中ボスに `health`（現在30）と `max_health` を持っています。
   * 被弾で体力が減り、0以下になると**爆発（Explosion）**を出して消滅し、スコアが加算され、通常敵の生成が再開されます。
   * 体力バー（ヘルスバー）を中ボス上部に描画します。

7. **爆発エフェクトの利用**

   * `fig` フォルダ内の `explosion_XX.png` 連番を優先利用し、なければ `explosion.gif` を使い、さらに無ければ赤い円でフォールバックします。
   * 実際にあなたがアップロードした `explosion.gif` を利用するように実装済みです。

8. **堅牢性（フォールバック処理）とデバッグ**

   * `MidBoss` コンストラクタで `all_sprites` 等のグループが渡されない場合はグローバル変数から取得するフォールバックを持っています。
   * フォントは日本語優先で探索して使用（表示の文字化け対策）。
   * 発射時に `print("MidBoss fired ...")` を出すデバッグ出力があり、発射イベントをコンソールで確認できます。

---



